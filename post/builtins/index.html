<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>"><title>Understanding all of Python, through its builtins</title><meta name="title" content="Understanding all of Python, through its builtins"><meta name="description" content="Python has a whole lot of builtins that are unknown to most people. This guide aims to introduce you to everything that Python has to offer, through its seemingly obscure builtins."><meta property="og:type" content="website"><meta property="og:url" content="https://sadh.life"><meta property="og:title" content="Understanding all of Python, through its builtins"><meta property="og:description" content="Python has a whole lot of builtins that are unknown to most people. This guide aims to introduce you to everything that Python has to offer, through its seemingly obscure builtins."><meta property="og:image" content="https://sadh.life/images/builtins.jpg"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://sadh.life"><meta property="twitter:title" content="Understanding all of Python, through its builtins"><meta property="twitter:description" content="Python has a whole lot of builtins that are unknown to most people. This guide aims to introduce you to everything that Python has to offer, through its seemingly obscure builtins."><meta property="twitter:image" content="https://sadh.life/images/builtins.jpg"><link rel="stylesheet" href="/_astro/common-ZJVY3Q.css" type="text/css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;600&amp;family=Open+Sans:wght@400;600&amp;display=swap"></head><body><header class="astro-mYHAcGzO"><a href="/" class="astro-mYHAcGzO"><svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" width="400" height="400" version="1.1" class="astro-mYHAcGzO"><g class="astro-mYHAcGzO"><rect width="380" height="380" x="10" y="10" stroke="var(--text-color)" stroke-width="18" rx="18" fill-opacity="0" class="astro-mYHAcGzO"></rect><text x="52.5" y="357.427" font-family="sans-serif" font-size="250" font-weight="bold" text-anchor="start" transform="matrix(0.946786642074585,0,0,1.0035842657089233,19.687279514968395,-1.4603642597794533)" xml:space="preserve" style="stroke: var(--text-color); fill: var(--text-color)" class="astro-mYHAcGzO">TS</text></g></svg></a><div class="right astro-mYHAcGzO"><astro-root uid="M"></astro-root>
<script type="module">
import setup from '/_astro_frontend/hydrate/only.js';
setup("M", {}, async () => {
  
  const [{ default: Component }, { default: hydrate }] = await Promise.all([import("/_astro/src/components/ThemeSwitch/Switch.js"), import("/_snowpack/pkg/@astrojs.renderer-preact.client.v0.2.1.js")]);
  return (el, children) => hydrate(el)(Component, {}, children);

});
</script></div></header><div class="layout astro-eZ0V7RoP"><header class="astro-eZ0V7RoP"><p class="publish-date astro-eZ0V7RoP">Wednesday, 18 August 2021</p><h1 class="title astro-eZ0V7RoP">Understanding all of Python, through its builtins</h1><img src="/images/builtins.jpg" alt="Understanding all of Python, through its builtins" class="astro-eZ0V7RoP"><div class="author astro-vgbcRyj4"><p class="astro-vgbcRyj4"><a href="https://tusharsadhwani.dev" class="astro-vgbcRyj4">@tusharsadhwani</a></p></div></header><article class="content astro-eZ0V7RoP"><main class="astro-eZ0V7RoP"><blockquote><h3 id="this-blog-is-currently-a-work-in-progress"><a aria-hidden="true" tabindex="-1" href="#this-blog-is-currently-a-work-in-progress"><span class="icon icon-link"></span></a>This blog is currently a work in progress.</h3></blockquote><p>Python as a language is comparatively simple. And I believe, that you can learn quite a lot about Python and its features, just by learning what all of its builtins are, and what they do. And to back up that claim, I‚Äôll be doing just that.</p><blockquote><p>Just to be clear, this is not going to be a tutorial post. Covering such a vast amount of material in a single blog post, while starting from the beginning is pretty much impossible. So I‚Äôll be assuming you have a basic to intermediate understanding of Python. But other than that, we should be good to go.</p></blockquote><h2 id="index"><a aria-hidden="true" tabindex="-1" href="#index"><span class="icon icon-link"></span></a>Index</h2><ul><li><a href="#index">Index</a></li><li><a href="#so-whats-a-builtin">So what‚Äôs a builtin?</a><ul><li><a href="#local-scope">Local scope</a></li><li><a href="#enclosing-scope">Enclosing scope</a></li><li><a href="#global-scope">Global scope</a></li><li><a href="#builtin-scope">Builtin scope</a></li></ul></li><li><a href="#all-the-builtins"><em>ALL</em> the builtins</a></li><li><a href="#exceptions">Exceptions</a></li><li><a href="#constants">Constants</a></li><li><a href="#funky-globals">Funky globals</a><ul><li><a href="#__name__"><code>__name__</code></a></li><li><a href="#__doc__"><code>__doc__</code></a></li><li><a href="#__package__"><code>__package__</code></a></li><li><a href="#__spec__"><code>__spec__</code></a></li><li><a href="#__loader__"><code>__loader__</code></a></li><li><a href="#__import__"><code>__import__</code></a></li><li><a href="#__debug__"><code>__debug__</code></a></li><li><a href="#__build_class__"><code>__build_class__</code></a></li><li><a href="#__cached__"><code>__cached__</code></a></li></ul></li><li><a href="#all-the-builtins-one-by-one">All the builtins, one by one</a><ul><li><a href="#compile-exec-and-eval"><code>compile</code>, <code>exec</code> and <code>eval</code></a></li><li><a href="#pending">Pending:</a></li></ul></li><li><a href="#where-to-learn-more">Where to learn more?</a></li></ul><h2 id="so-whats-a-builtin"><a aria-hidden="true" tabindex="-1" href="#so-whats-a-builtin"><span class="icon icon-link"></span></a>So what‚Äôs a builtin?</h2><p>A builtin in a Python is everything that lives in the <code>builtins</code> module.</p><p>To understand this better, you‚Äôll need to learn about the <strong>L.E.G.B.</strong> rule.</p><p>^ This defines the order of scopes in which variables are looked up in Python. It stands for:</p><ul><li><strong>L</strong>ocal scope</li><li><strong>E</strong>nclosing (or nonlocal) scope</li><li><strong>G</strong>lobal scope</li><li><strong>B</strong>uiltin scope</li></ul><h3 id="local-scope"><a aria-hidden="true" tabindex="-1" href="#local-scope"><span class="icon icon-link"></span></a>Local scope</h3><p>The local scope refers to the scope that comes with the current function or class you are in. Every function call and class instantiation creates a fresh local scope for you, to hold local variables in.</p><p>Here‚Äôs an example:</p><pre class=""><code class="language-python">x <span class="token operator">=</span> <span class="token number">11</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">some_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">22</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

some_function<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre><p>Running this code outputs:</p><pre class=""><code class="language-plaintext">11
22
11
</code></pre><p>So here‚Äôs what‚Äôs happening: Doing <code>x = 22</code> defines a new variable inside <code>some_function</code> is in it‚Äôs own <strong>local namespace</strong>. After that point, when the function refers to <code>x</code> it means the one in its own scope. Accessing <code>x</code> outside of <code>some_function</code> refers to the one defined outside.</p><h3 id="enclosing-scope"><a aria-hidden="true" tabindex="-1" href="#enclosing-scope"><span class="icon icon-link"></span></a>Enclosing scope</h3><p>The enclosing scope (or nonlocal scope) refers to the scope of the classes or functions inside which the current function/class lives.</p><p>‚Ä¶ I can already see half of you going ü§® right now. So let me explain with an example:</p><pre class=""><code class="language-python">x <span class="token operator">=</span> <span class="token number">11</span>
<span class="token keyword">def</span> <span class="token function">outer_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">22</span>
    y <span class="token operator">=</span> <span class="token number">789</span>

    <span class="token keyword">def</span> <span class="token function">inner_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        x <span class="token operator">=</span> <span class="token number">33</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Inner x:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Enclosing y:'</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>

    inner_function<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Outer x:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>

outer_function<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Global x:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
</code></pre><p>The output of this is:</p><pre class=""><code class="language-plaintext">Inner x: 33
Enclosing y: 789
Outer x: 22
Global x: 11
</code></pre><p>What it essentially means is that every new function/class creates its own local scope, <strong>separate from its outer environment</strong>. Trying to access an outer variable will work, but any variable created in the local scope does not affect the outer scope.</p><blockquote><p>But what if I want to affect the outer scope?</p></blockquote><p>To do that, you can use the <code>nonlocal</code> keyword in Python to tell the interpreter that you don‚Äôt mean to define a new variable in the local scope, but you want to modify the one in the enclosing scope.</p><pre class=""><code class="language-python"><span class="token keyword">def</span> <span class="token function">outer_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">11</span>

    <span class="token keyword">def</span> <span class="token function">inner_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">nonlocal</span> x
        x <span class="token operator">=</span> <span class="token number">22</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Inner x:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>

    inner_funcion<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Outer x:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
</code></pre><p>This prints:</p><pre class=""><code class="language-plaintext">Inner x: 22
Outer x: 22
</code></pre><h3 id="global-scope"><a aria-hidden="true" tabindex="-1" href="#global-scope"><span class="icon icon-link"></span></a>Global scope</h3><p>Global scope (or module scope) simply refers to the scope where all the module‚Äôs variables, functions and classes are defined.</p><p>A ‚Äúmodule‚Äù is any python file or package that can be run or imported. For eg. <code>time</code> is a module (as you can do <code>import time</code> in your code), and <code>time.sleep()</code> is a function defined in the <code>time</code> module‚Äôs global scope.</p><p>Every module in Python has a few pre-defined globals, such as <code>__name__</code> and <code>__doc__</code>, which refer to the module‚Äôs name and the module‚Äôs docstring, respectively. You can try this in the REPL:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
__main__
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>__doc__<span class="token punctuation">)</span>
<span class="token boolean">None</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> time
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> time<span class="token punctuation">.</span>__name__
<span class="token string">'time'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> time<span class="token punctuation">.</span>__doc__
<span class="token string">'This module provides various functions to manipulate time values.'</span>
</code></pre><h3 id="builtin-scope"><a aria-hidden="true" tabindex="-1" href="#builtin-scope"><span class="icon icon-link"></span></a>Builtin scope</h3><p>Now we get to the topic of this blog ‚Äî the builtin scope.</p><p>So there‚Äôs two things to know about the builtin scope in Python:</p><ul><li>It‚Äôs the scope where essentially all of Python‚Äôs top level functions are defined, such as <code>len</code>, <code>range</code> and <code>print</code>.</li><li>When a variable is not found in the local, enclosing or global scope, Python looks for it inside the builtins.</li></ul><p>You can inspect the builtins directly if you want, by importing the <code>builtins</code> module, and checking methods inside it:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> builtins
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> builtins<span class="token punctuation">.</span>a   <span class="token comment"># press &lt;Tab&gt; here</span>
builtins<span class="token punctuation">.</span><span class="token builtin">abs</span><span class="token punctuation">(</span>    builtins<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span>    builtins<span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span>    builtins<span class="token punctuation">.</span><span class="token builtin">ascii</span><span class="token punctuation">(</span>
</code></pre><p>And for some reason unknown to me, Python exposes the builtins module as <code>__builtins__</code> by default in the global namespace. So you can also access <code>__builtins__</code> directly, without importing anything. Note, that <code>__builtins__</code> being available is a CPython implementation detail, and other Python implementations might not have it. <code>import builtins</code> is the most correct way to access the builtins module.</p><h2 id="all-the-builtins"><a aria-hidden="true" tabindex="-1" href="#all-the-builtins"><span class="icon icon-link"></span></a><em>ALL</em> the builtins</h2><p>You can use the <code>dir</code> function to print all the variables defined inside a module or class. So let‚Äôs use that to list out all of the builtins:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token punctuation">(</span>__builtins__<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'ArithmeticError'</span><span class="token punctuation">,</span> <span class="token string">'AssertionError'</span><span class="token punctuation">,</span> <span class="token string">'AttributeError'</span><span class="token punctuation">,</span> <span class="token string">'BaseException'</span><span class="token punctuation">,</span>
 <span class="token string">'BlockingIOError'</span><span class="token punctuation">,</span> <span class="token string">'BrokenPipeError'</span><span class="token punctuation">,</span> <span class="token string">'BufferError'</span><span class="token punctuation">,</span> <span class="token string">'BytesWarning'</span><span class="token punctuation">,</span>
 <span class="token string">'ChildProcessError'</span><span class="token punctuation">,</span> <span class="token string">'ConnectionAbortedError'</span><span class="token punctuation">,</span> <span class="token string">'ConnectionError'</span><span class="token punctuation">,</span>
 <span class="token string">'ConnectionRefusedError'</span><span class="token punctuation">,</span> <span class="token string">'ConnectionResetError'</span><span class="token punctuation">,</span> <span class="token string">'DeprecationWarning'</span><span class="token punctuation">,</span>
 <span class="token string">'EOFError'</span><span class="token punctuation">,</span> <span class="token string">'Ellipsis'</span><span class="token punctuation">,</span> <span class="token string">'EnvironmentError'</span><span class="token punctuation">,</span> <span class="token string">'Exception'</span><span class="token punctuation">,</span> <span class="token string">'False'</span><span class="token punctuation">,</span>
 <span class="token string">'FileExistsError'</span><span class="token punctuation">,</span> <span class="token string">'FileNotFoundError'</span><span class="token punctuation">,</span> <span class="token string">'FloatingPointError'</span><span class="token punctuation">,</span>
 <span class="token string">'FutureWarning'</span><span class="token punctuation">,</span> <span class="token string">'GeneratorExit'</span><span class="token punctuation">,</span> <span class="token string">'IOError'</span><span class="token punctuation">,</span> <span class="token string">'ImportError'</span><span class="token punctuation">,</span>
 <span class="token string">'ImportWarning'</span><span class="token punctuation">,</span> <span class="token string">'IndentationError'</span><span class="token punctuation">,</span> <span class="token string">'IndexError'</span><span class="token punctuation">,</span> <span class="token string">'InterruptedError'</span><span class="token punctuation">,</span>
 <span class="token string">'IsADirectoryError'</span><span class="token punctuation">,</span> <span class="token string">'KeyError'</span><span class="token punctuation">,</span> <span class="token string">'KeyboardInterrupt'</span><span class="token punctuation">,</span> <span class="token string">'LookupError'</span><span class="token punctuation">,</span>
 <span class="token string">'MemoryError'</span><span class="token punctuation">,</span> <span class="token string">'ModuleNotFoundError'</span><span class="token punctuation">,</span> <span class="token string">'NameError'</span><span class="token punctuation">,</span> <span class="token string">'None'</span><span class="token punctuation">,</span>
 <span class="token string">'NotADirectoryError'</span><span class="token punctuation">,</span> <span class="token string">'NotImplemented'</span><span class="token punctuation">,</span> <span class="token string">'NotImplementedError'</span><span class="token punctuation">,</span>
 <span class="token string">'OSError'</span><span class="token punctuation">,</span> <span class="token string">'OverflowError'</span><span class="token punctuation">,</span> <span class="token string">'PendingDeprecationWarning'</span><span class="token punctuation">,</span>
 <span class="token string">'PermissionError'</span><span class="token punctuation">,</span> <span class="token string">'ProcessLookupError'</span><span class="token punctuation">,</span> <span class="token string">'RecursionError'</span><span class="token punctuation">,</span>
 <span class="token string">'ReferenceError'</span><span class="token punctuation">,</span> <span class="token string">'ResourceWarning'</span><span class="token punctuation">,</span> <span class="token string">'RuntimeError'</span><span class="token punctuation">,</span> <span class="token string">'RuntimeWarning'</span><span class="token punctuation">,</span>
 <span class="token string">'StopAsyncIteration'</span><span class="token punctuation">,</span> <span class="token string">'StopIteration'</span><span class="token punctuation">,</span> <span class="token string">'SyntaxError'</span><span class="token punctuation">,</span> <span class="token string">'SyntaxWarning'</span><span class="token punctuation">,</span>
 <span class="token string">'SystemError'</span><span class="token punctuation">,</span> <span class="token string">'SystemExit'</span><span class="token punctuation">,</span> <span class="token string">'TabError'</span><span class="token punctuation">,</span> <span class="token string">'TimeoutError'</span><span class="token punctuation">,</span> <span class="token string">'True'</span><span class="token punctuation">,</span>
 <span class="token string">'TypeError'</span><span class="token punctuation">,</span> <span class="token string">'UnboundLocalError'</span><span class="token punctuation">,</span> <span class="token string">'UnicodeDecodeError'</span><span class="token punctuation">,</span>
 <span class="token string">'UnicodeEncodeError'</span><span class="token punctuation">,</span> <span class="token string">'UnicodeError'</span><span class="token punctuation">,</span> <span class="token string">'UnicodeTranslateError'</span><span class="token punctuation">,</span>
 <span class="token string">'UnicodeWarning'</span><span class="token punctuation">,</span> <span class="token string">'UserWarning'</span><span class="token punctuation">,</span> <span class="token string">'ValueError'</span><span class="token punctuation">,</span> <span class="token string">'Warning'</span><span class="token punctuation">,</span>
 <span class="token string">'ZeroDivisionError'</span><span class="token punctuation">,</span> <span class="token string">'__build_class__'</span><span class="token punctuation">,</span> <span class="token string">'__debug__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">,</span>
 <span class="token string">'__import__'</span><span class="token punctuation">,</span> <span class="token string">'__loader__'</span><span class="token punctuation">,</span> <span class="token string">'__name__'</span><span class="token punctuation">,</span> <span class="token string">'__package__'</span><span class="token punctuation">,</span> <span class="token string">'__spec__'</span><span class="token punctuation">,</span>
 <span class="token string">'abs'</span><span class="token punctuation">,</span> <span class="token string">'all'</span><span class="token punctuation">,</span> <span class="token string">'any'</span><span class="token punctuation">,</span> <span class="token string">'ascii'</span><span class="token punctuation">,</span> <span class="token string">'bin'</span><span class="token punctuation">,</span> <span class="token string">'bool'</span><span class="token punctuation">,</span> <span class="token string">'breakpoint'</span><span class="token punctuation">,</span> <span class="token string">'bytearray'</span><span class="token punctuation">,</span>
 <span class="token string">'bytes'</span><span class="token punctuation">,</span> <span class="token string">'callable'</span><span class="token punctuation">,</span> <span class="token string">'chr'</span><span class="token punctuation">,</span> <span class="token string">'classmethod'</span><span class="token punctuation">,</span> <span class="token string">'compile'</span><span class="token punctuation">,</span> <span class="token string">'complex'</span><span class="token punctuation">,</span>
 <span class="token string">'copyright'</span><span class="token punctuation">,</span> <span class="token string">'credits'</span><span class="token punctuation">,</span> <span class="token string">'delattr'</span><span class="token punctuation">,</span> <span class="token string">'dict'</span><span class="token punctuation">,</span> <span class="token string">'dir'</span><span class="token punctuation">,</span> <span class="token string">'divmod'</span><span class="token punctuation">,</span> <span class="token string">'enumerate'</span><span class="token punctuation">,</span>
 <span class="token string">'eval'</span><span class="token punctuation">,</span> <span class="token string">'exec'</span><span class="token punctuation">,</span> <span class="token string">'exit'</span><span class="token punctuation">,</span> <span class="token string">'filter'</span><span class="token punctuation">,</span> <span class="token string">'float'</span><span class="token punctuation">,</span> <span class="token string">'format'</span><span class="token punctuation">,</span> <span class="token string">'frozenset'</span><span class="token punctuation">,</span>
 <span class="token string">'getattr'</span><span class="token punctuation">,</span> <span class="token string">'globals'</span><span class="token punctuation">,</span> <span class="token string">'hasattr'</span><span class="token punctuation">,</span> <span class="token string">'hash'</span><span class="token punctuation">,</span> <span class="token string">'help'</span><span class="token punctuation">,</span> <span class="token string">'hex'</span><span class="token punctuation">,</span> <span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
 <span class="token string">'int'</span><span class="token punctuation">,</span> <span class="token string">'isinstance'</span><span class="token punctuation">,</span> <span class="token string">'issubclass'</span><span class="token punctuation">,</span> <span class="token string">'iter'</span><span class="token punctuation">,</span> <span class="token string">'len'</span><span class="token punctuation">,</span> <span class="token string">'license'</span><span class="token punctuation">,</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
 <span class="token string">'locals'</span><span class="token punctuation">,</span> <span class="token string">'map'</span><span class="token punctuation">,</span> <span class="token string">'max'</span><span class="token punctuation">,</span> <span class="token string">'memoryview'</span><span class="token punctuation">,</span> <span class="token string">'min'</span><span class="token punctuation">,</span> <span class="token string">'next'</span><span class="token punctuation">,</span> <span class="token string">'object'</span><span class="token punctuation">,</span> <span class="token string">'oct'</span><span class="token punctuation">,</span>
 <span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token string">'ord'</span><span class="token punctuation">,</span> <span class="token string">'pow'</span><span class="token punctuation">,</span> <span class="token string">'print'</span><span class="token punctuation">,</span> <span class="token string">'property'</span><span class="token punctuation">,</span> <span class="token string">'quit'</span><span class="token punctuation">,</span> <span class="token string">'range'</span><span class="token punctuation">,</span> <span class="token string">'repr'</span><span class="token punctuation">,</span>
 <span class="token string">'reversed'</span><span class="token punctuation">,</span> <span class="token string">'round'</span><span class="token punctuation">,</span> <span class="token string">'set'</span><span class="token punctuation">,</span> <span class="token string">'setattr'</span><span class="token punctuation">,</span> <span class="token string">'slice'</span><span class="token punctuation">,</span> <span class="token string">'sorted'</span><span class="token punctuation">,</span>
 <span class="token string">'staticmethod'</span><span class="token punctuation">,</span> <span class="token string">'str'</span><span class="token punctuation">,</span> <span class="token string">'sum'</span><span class="token punctuation">,</span> <span class="token string">'super'</span><span class="token punctuation">,</span> <span class="token string">'tuple'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'vars'</span><span class="token punctuation">,</span> <span class="token string">'zip'</span><span class="token punctuation">]</span>
</code></pre><p>‚Ä¶yeah, there‚Äôs a lot. But don‚Äôt worry, we‚Äôll break these down into various groups, and knock them down one by one.</p><p>So let‚Äôs tackle the biggest group by far:</p><h2 id="exceptions"><a aria-hidden="true" tabindex="-1" href="#exceptions"><span class="icon icon-link"></span></a>Exceptions</h2><p>Python has 66 built-in exception classes, each one intended to be used by the user, the standard library and everyone else, to serve as meaningful ways to interpret and catch errors in your code.</p><p>To explain exactly why there‚Äôs separate Exception classes in Python, here‚Äôs a quick example:</p><pre class=""><code class="language-python"><span class="token keyword">def</span> <span class="token function">fetch_from_cache</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> key <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">'key must not be None'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> cached_items<span class="token punctuation">[</span>key<span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">get_value</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        value <span class="token operator">=</span> fetch_from_cache<span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">except</span> KeyError<span class="token punctuation">:</span>
        value <span class="token operator">=</span> fetch_from_api<span class="token punctuation">(</span>key<span class="token punctuation">)</span>

    <span class="token keyword">return</span> value
</code></pre><p>Focus on the <code>get_value</code> function. It‚Äôs supposed to return a cached value if it exists, otherwise fetch data from an API.</p><p>There‚Äôs 3 things that can happen in that function:</p><ul><li><p>If the <code>key</code> is not in the cache, trying to access <code>cached_items[key]</code> raises a <code>KeyError</code>. This is caught in the <code>try</code> block, and an API call is made to get the data.</p></li><li><p>If they <code>key</code><em>is</em> present in the cache, it is returned as is.</p></li><li><p>There‚Äôs also a third case, where <code>key</code> is <code>None</code>.</p><p>If the key is <code>None</code>, <code>fetch_from_cache</code> raises a <code>ValueError</code>, indicating that the value provided to this function was inappropriate. And since the <code>try</code> block only catches <code>KeyError</code>, this error is shown directly to the user.</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> get_value<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">in</span> get_value
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">in</span> fetch_from_cache
ValueError<span class="token punctuation">:</span> key must <span class="token keyword">not</span> be <span class="token boolean">None</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre></li></ul><p>If <code>ValueError</code> and <code>KeyError</code> weren‚Äôt predefined, meaningful error types, there wouldn‚Äôt be any way to differentiate between error types in this way.</p><details><summary>P.S. Some extra Exception trivia...</summary>
A fun fact about exceptions is that they can be sub-classed to make your own, more specific error types. For example, you can create a InvalidEmailError extending ValueError, to raise errors when you expected to receive an E-mail string, but it wasn't valid. If you do this, you'll be able to catch InvalidEmailError by doing except ValueError as well.
<p>Another fact about exceptions is that every exception is a subclasses of <code>BaseException</code>, and nearly all of them are subclasses of <code>Exception</code>, other than a few that aren‚Äôt supposed to be normally caught. So if you ever wanted to be able to catch any exception normally thrown by code, you could do</p><pre class=""><code class="language-python"><span class="token keyword">except</span> Exception<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><p>and if you wanted to catch <em>every possible error</em>, you could do</p><pre class=""><code class="language-python"><span class="token keyword">except</span> BaseException<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><p>Doing that would even catch <code>KeyboardInterrupt</code>, which would make you unable to close your program by pressing <code>Ctrl+C</code>. To read about the hierarchy of which Error is subclassed from which in Python, you can check the <a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy">Exception hierarchy</a> in the docs.</p></details><p>Now I should point it out that now <em>all</em> uppercase values in that output above were exception types, there‚Äôs in-fact, 1 another type of built-in objects in Python that are uppercase: constants. So let‚Äôs talk about those.</p><h2 id="constants"><a aria-hidden="true" tabindex="-1" href="#constants"><span class="icon icon-link"></span></a>Constants</h2><p>There‚Äôs exactly 5 constants: <code>True</code>, <code>False</code>, <code>None</code>, <code>Ellipsis</code>, and <code>NotImplemented</code>.</p><p><code>True</code><code>False</code> and <code>None</code> are the most obvious constants.</p><p><code>Ellipsis</code> is an interesting one, and it‚Äôs actually represented in two forms: the word <code>Ellipsis</code>, and the symbol <code>...</code>. It mostly exists to support <a href="/mypy-guide">type annotations</a>, and for some very fancy slicing support.</p><p><code>NotImplemented</code> is the most interesting of them all <em>(other than the fact that <code>True</code> and <code>False</code> actually function as <code>1</code> and <code>0</code> if you didn‚Äôt know that, but I digress)</em>. <code>NotImplemented</code> is used inside a class‚Äô operator definitions, when you want to tell Python that a certain operator isn‚Äôt defined for this class.</p><p>Now I should mention that all objects in Python can add support for all Python operators, such as <code>+</code>, <code>-</code>, <code>+=</code>, etc., by defining special methods inside their class, such as <code>__add__</code> for <code>+</code>, <code>__iadd__</code> for <code>+=</code>, and so on.</p><p>Let‚Äôs see a quick example of that:</p><pre class=""><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyNumber</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__add__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> other <span class="token operator">+</span> <span class="token number">42</span>
</code></pre><details><summary>Extras: right-operators</summary><p>If you‚Äôre wondering from the code example above why I never tried to do <code>3 + n</code>, it‚Äôs because it doesn‚Äôt work yet:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token operator">+</span> n
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> unsupported operand <span class="token builtin">type</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token operator">+</span><span class="token punctuation">:</span> <span class="token string">'int'</span> <span class="token keyword">and</span> <span class="token string">'MyNumber'</span>
</code></pre><p>But, support for that can be added pretty easily by adding the <code>__radd__</code> operator, which adds support for <em>right-addition</em>:</p><pre class=""><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyNumber</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__add__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> other <span class="token operator">+</span> <span class="token number">42</span>

    <span class="token keyword">def</span> <span class="token function">__radd__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> other <span class="token operator">+</span> <span class="token number">42</span>
</code></pre><p>As a bonus, this also adds support for adding two <code>MyNumber</code> classes:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> n <span class="token operator">=</span> MyNumber<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> n <span class="token operator">+</span> <span class="token number">100</span>
<span class="token number">142</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token operator">+</span> n
<span class="token number">45</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> n <span class="token operator">+</span> n
<span class="token number">84</span>
</code></pre></details><p>But let‚Äôs say you only want to support integer addition with this class, and not floats. This is where you‚Äôd use <code>NotImplemented</code>:</p><pre class=""><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyNumber</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__add__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> NotImplemented

        <span class="token keyword">return</span> other <span class="token operator">+</span> <span class="token number">42</span>
</code></pre><p>Returning <code>NotImplemented</code> from an operator method tells Python that this is an unsupported operation. Python then conveniently wraps this into a <code>TypeError</code> with a meaningful message:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> n <span class="token operator">+</span> <span class="token number">0.12</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> unsupported operand <span class="token builtin">type</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token operator">+</span><span class="token punctuation">:</span> <span class="token string">'MyNumber'</span> <span class="token keyword">and</span> <span class="token string">'float'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> n <span class="token operator">+</span> <span class="token number">10</span>
<span class="token number">52</span>
</code></pre><p>A weird fact about constants is that they aren‚Äôt even implemented in Python, they‚Äôre implemented directly in C code, like <a href="https://github.com/python/cpython/blob/7e246a3/Include/object.h#L610">this</a> for example.</p><h2 id="funky-globals"><a aria-hidden="true" tabindex="-1" href="#funky-globals"><span class="icon icon-link"></span></a>Funky globals</h2><p>There‚Äôs another group of odd-looking values in the builtins output we saw above: values like <code>__spec__</code>, <code>__loader__</code>, <code>__debug__</code> etc.</p><p>These are actually not unique to the <code>builtins</code> module. These properties are all present in the global scope of every module in Python, as they are <em>module attributes</em>. These hold information about the module that is required for the <strong>import machinery</strong>. Let‚Äôs take a look at them:</p><h3 id="__name__"><a aria-hidden="true" tabindex="-1" href="#__name__"><span class="icon icon-link"></span></a><code>__name__</code></h3><p>Contains the name of the module. <code>builtins.__name__</code> will be the string <code>'builtins'</code>. When you run a Python file, that is also run as a module, and the module name for that is <code>__main__</code>. This should explain why <code>if __name__ == '__main__'</code> is used in Python files.</p><h3 id="__doc__"><a aria-hidden="true" tabindex="-1" href="#__doc__"><span class="icon icon-link"></span></a><code>__doc__</code></h3><p>Contains the module‚Äôs docstring. It‚Äôs what‚Äôs shown as the module description when you do <code>help(module_name)</code>.</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> time
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>
This module provides various functions to manipulate time values<span class="token punctuation">.</span>

There are two standard representations of time<span class="token punctuation">.</span>  One <span class="token keyword">is</span> the number<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">help</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
Help on built<span class="token operator">-</span><span class="token keyword">in</span> module time<span class="token punctuation">:</span>

NAME
    time <span class="token operator">-</span> This module provides various functions to manipulate time values<span class="token punctuation">.</span>

DESCRIPTION
    There are two standard representations of time<span class="token punctuation">.</span>  One <span class="token keyword">is</span> the number<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><blockquote><p>More Python trivia: this is why the <a href="https://python.org/dev/peps/pep-0008">PEP8 style guide</a> says ‚Äúdocstrings should have a line length of 72 characters‚Äù: because docstrings can be indented upto two levels in the <code>help()</code> message, so to neatly fit on an 80-character wide terminal they must be at a maximum, 72 characters wide.</p></blockquote><h3 id="__package__"><a aria-hidden="true" tabindex="-1" href="#__package__"><span class="icon icon-link"></span></a><code>__package__</code></h3><p>The package to which this module belongs. For top-level modules it is the same as <code>__name__</code>. For sub-modules it is the package‚Äôs <code>__name__</code>. For example:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> urllib<span class="token punctuation">.</span>__package__
<span class="token string">'urllib'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>__package__
<span class="token string">'urllib'</span>
</code></pre><h3 id="__spec__"><a aria-hidden="true" tabindex="-1" href="#__spec__"><span class="icon icon-link"></span></a><code>__spec__</code></h3><p>This refers to the module spec. It contains metadata such as the module name, what kind of module it is, as well as how it was created and loaded.</p><pre class=""><code class="language-python">$ tree mytest
mytest
‚îî‚îÄ‚îÄ a
    ‚îî‚îÄ‚îÄ b<span class="token punctuation">.</span>py

<span class="token number">1</span> directory<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token builtin">file</span>

$ python <span class="token operator">-</span>q
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> mytest<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> mytest<span class="token punctuation">.</span>__spec__
ModuleSpec<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'mytest'</span><span class="token punctuation">,</span> loader<span class="token operator">=</span><span class="token operator">&lt;</span>_frozen_importlib_external<span class="token punctuation">.</span>_NamespaceLoader <span class="token builtin">object</span> at <span class="token number">0x7f28c767e5e0</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> submodule_search_locations<span class="token operator">=</span>_NamespacePath<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/tmp/mytest'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> mytest<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>__spec__
ModuleSpec<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'mytest.a.b'</span><span class="token punctuation">,</span> loader<span class="token operator">=</span><span class="token operator">&lt;</span>_frozen_importlib_external<span class="token punctuation">.</span>SourceFileLoader <span class="token builtin">object</span> at <span class="token number">0x7f28c767e430</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> origin<span class="token operator">=</span><span class="token string">'/tmp/mytest/a/b.py'</span><span class="token punctuation">)</span>
</code></pre><p>You can see through it that, <code>mytest</code> was located using something called <code>NamespaceLoader</code> from the directory <code>/tmp/mytest</code>, and <code>mytest.a.b</code> was loaded using a <code>SourceFileLoader</code>, from the source file <code>b.py</code>.</p><h3 id="__loader__"><a aria-hidden="true" tabindex="-1" href="#__loader__"><span class="icon icon-link"></span></a><code>__loader__</code></h3><p>Let‚Äôs see what this is, directly in the REPL:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> __loader__
<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'_frozen_importlib.BuiltinImporter'</span><span class="token operator">&gt;</span>
</code></pre><p>The <code>__loader__</code> is set to the loader object that the import machinery used when loading the module. This specific one is defined within the <code>_frozen_importlib</code> module, and is what‚Äôs used to import the builtin modules.</p><p>Looking slightly more closely at the example before this, you might notice that the <code>loader</code> attributes of the module spec are <code>Loader</code> classes that come from the slightly different <code>_frozen_importlib_external</code> module.</p><p>So you might ask, what are these weird <code>_frozen</code> modules? Well, my friend, it‚Äôs exactly as they say ‚Äî they‚Äôre <em>frozen modules</em>.</p><p>The <em>actual</em> source code of these two modules is actually inside the <code>importlib.machinery</code> module. These <code>_frozen</code> aliases are frozen versions of the source code of these loaders. To create a frozen module, the Python code is compiled to a code object, marshalled into a file, and then added to the Python executable.</p><p>Python freezes these two modules because they implement the core of the import system and, thus, cannot be imported like other Python files when the interpreter boots up. Essentially, they are needed to exist to <em>bootstrap the import system</em>.</p><p>Funnily enough, there‚Äôs another well-defined frozen module in Python: it‚Äôs <code>__hello__</code>:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> __hello__
Hello world!
</code></pre><p>Is this the shortest hello world code in any language? :P</p><p>Well this <code>__hello__</code> module was originally added to Python as a test for frozen modules, to see whether or not they work properly. It has stayed in the language as an easter egg ever since.</p><h3 id="__import__"><a aria-hidden="true" tabindex="-1" href="#__import__"><span class="icon icon-link"></span></a><code>__import__</code></h3><p><code>__import__</code> is the builtin function that defines how import statements work in Python.</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> random
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random
<span class="token operator">&lt;</span>module <span class="token string">'random'</span> <span class="token keyword">from</span> <span class="token string">'/usr/lib/python3.9/random.py'</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">__import__</span><span class="token punctuation">(</span><span class="token string">'random'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>module <span class="token string">'random'</span> <span class="token keyword">from</span> <span class="token string">'/usr/lib/python3.9/random.py'</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> np <span class="token operator">=</span> <span class="token builtin">__import__</span><span class="token punctuation">(</span><span class="token string">'numpy'</span><span class="token punctuation">)</span>  <span class="token comment"># Same as doing 'import numpy as np'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> np
<span class="token operator">&lt;</span>module <span class="token string">'numpy'</span> <span class="token keyword">from</span> <span class="token string">'/home/tushar/.local/lib/python3.9/site-packages/numpy/__init__.py'</span><span class="token operator">&gt;</span>
</code></pre><p>Essentially, every import statement can be translated into an <code>__import__</code> function call. Internally, that‚Äôs pretty much what Python is doing to the import statements (but directly in C).</p><blockquote><p>Now, there‚Äôs three more of these properties left: <code>__debug__</code> and <code>__build_class__</code> which are only present globally and are not module variables, and <code>__cached__</code>, which is only present in imported modules.</p></blockquote><h3 id="__debug__"><a aria-hidden="true" tabindex="-1" href="#__debug__"><span class="icon icon-link"></span></a><code>__debug__</code></h3><p>This is a global, constant value in Python, which is almost always set to <code>True</code>.</p><p>What it refers to, is Python running in <em>debug mode</em>. And Python always runs in debug mode by default.</p><p>The other mode that Python can run in, is <em>‚Äúoptimized mode‚Äù</em>. To run python in ‚Äúoptimized mode‚Äù, you can invoke it by passing the <code>-O</code> flag. And all it does, is prevents assert statements from doing anything (at least so far), which is in all honesty, not really useful at all.</p><pre class=""><code class="language-python">$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> __debug__
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">assert</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'some error'</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
AssertionError<span class="token punctuation">:</span> some error
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>

$ python <span class="token operator">-</span>O
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> __debug__
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">assert</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'some error'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><p>Also, <code>__debug__</code>, <code>True</code><code>False</code> and <code>None</code> are the only <strong>true constants</strong> in Python, i.e. these 4 are the only global variables in Python that you cannot overwrite with a new value.</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token boolean">True</span> <span class="token operator">=</span> <span class="token number">42</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span>
    <span class="token boolean">True</span> <span class="token operator">=</span> <span class="token number">42</span>
    <span class="token operator">^</span>
SyntaxError<span class="token punctuation">:</span> cannot assign to <span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> __debug__ <span class="token operator">=</span> <span class="token boolean">False</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span>
SyntaxError<span class="token punctuation">:</span> cannot assign to __debug__
</code></pre><h3 id="__build_class__"><a aria-hidden="true" tabindex="-1" href="#__build_class__"><span class="icon icon-link"></span></a><code>__build_class__</code></h3><p>This global was added in Python 3.1, to allow for class definitions to accept arbitrary positional and keyword arguments. There are long, technical reasons to why this is a feature, and it touches advanced topics like metaclasses, so unfortunately I won‚Äôt be explaining why it exists.</p><p>But all you need to know is that this is what allows you to do things like this while making a class:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">def</span> <span class="token function">__init_subclass__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Subclass got data: </span><span class="token interpolation"><span class="token punctuation">{</span>kwargs<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">(</span>C<span class="token punctuation">,</span> num<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">,</span> data<span class="token operator">=</span><span class="token string">'xyz'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">pass</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Subclass got data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'num'</span><span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">'data'</span><span class="token punctuation">:</span> <span class="token string">'xyz'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><p>Before Python 3.1, The class creation syntax only allowed passing base classes to inherit from, and a metaclass property. The new requirements were to allow variable number of positional and keyword arguments. This would be a bit messy and complex to add to the language.</p><p>But, we already have this, of course, in the code for calling regular functions. So it was proposed that the <code>Class X(...)</code> syntax will simply delegate to a function call underneath: <code>__build_class__(cls, ...)</code>.</p><h3 id="__cached__"><a aria-hidden="true" tabindex="-1" href="#__cached__"><span class="icon icon-link"></span></a><code>__cached__</code></h3><p>This is an interesting one.</p><p>When you import a module, the <code>__cached__</code> property stores the path of the cached file of the <strong>compiled Python bytecode</strong> of that module.</p><p>‚ÄúWhat?!‚Äù, you might be saying, ‚ÄúPython? Compiled?‚Äù</p><p>Yeah. Python <em>is</em> compiled. In fact, all Python code is compiled, but not to machine code ‚Äî to <strong>bytecode</strong>. Let me explain this point by explaining how Python runs your code.</p><p>Here are the steps that the Python interpreter does to run your code:</p><ul><li>It takes your source file, and parses it into a syntax tree. The syntax tree is a representation of your code that can be more easily understood by a program. It finds and reports any errors in the code‚Äôs syntax, and ensures that there are no ambiguities.</li><li>The next step is to compile the source file into <em>bytecode</em>. This bytecode is a set of micro-instructions for <strong>Python‚Äôs virtual machine</strong>. This ‚Äúvirtual machine‚Äù is where Python‚Äôs interpreter logic resides. It essentially <em>emulates</em> a very simple stack-based computer on your machine, in order to execute the Python code written by you.</li><li>This bytecode-form of your code is then run on the Python VM. The bytecode instructions are simple things like pushing and popping data off the current stack. Each of these instructions, when run one after the other, executes the entire program.</li></ul><blockquote><p>We will take a really detailed example of the steps above, in the next section. Hang tight!</p></blockquote><p>Now since the ‚Äúcompiling to bytecode‚Äù step above takes a noticeable amount of time when you import a module, Python stores <em>(marshalls)</em> the bytecode into a <code>.pyc</code> file, and stores it in a folder called <code>__pycache__</code>. The <code>__cached__</code> parameter of the imported module then points to this <code>.pyc</code> file.</p><p>When the same module is imported again at a later time, Python checks if a <code>.pyc</code> version of the module exists, and then directly imports the already-compiled version instead, saving a bunch of time and computation.</p><p>If you‚Äôre wondering: yes, you can directly run or import a <code>.pyc</code> file in Python code, just like a <code>.py</code> file:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> test
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> test<span class="token punctuation">.</span>__cached__
<span class="token string">'/usr/lib/python3.9/test/__pycache__/__init__.cpython-39.pyc'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> exit<span class="token punctuation">(</span><span class="token punctuation">)</span>

$ cp <span class="token string">'/usr/lib/python3.9/test/__pycache__/__init__.cpython-39.pyc'</span> cached_test<span class="token punctuation">.</span>pyc
$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> cached_test  <span class="token comment"># Runs!</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><h2 id="all-the-builtins-one-by-one"><a aria-hidden="true" tabindex="-1" href="#all-the-builtins-one-by-one"><span class="icon icon-link"></span></a>All the builtins, one by one</h2><p>Now we can finally get on with builtins. And, to build upon the last section, let‚Äôs start this off with some of the most interesting ones, the ones that build the basis of Python as a language.</p><h3 id="compile-exec-and-eval"><a aria-hidden="true" tabindex="-1" href="#compile-exec-and-eval"><span class="icon icon-link"></span></a><code>compile</code>, <code>exec</code> and <code>eval</code></h3><p>In the previous section, we saw the 3 steps required to run some python code. This section will get into details about the 3 steps, and how you can observe exactly what Python is doing.</p><p>Let‚Äôs take this code as an example:</p><pre class=""><code class="language-python">x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre><p>You can save this code into a file and run it, or type it in the Python REPL. In both the cases, you‚Äôll get an output.</p><p>Or thirdly, you can give the program as a string to Python‚Äôs builtin function <code>exec</code>:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
... x = [1, 2]
... print(x)
... '''</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">exec</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
</code></pre><p><code>exec</code> (short for execute) takes in some Python code as a string, and runs it as Python code. By default, <code>exec</code> will run in the same scope as the rest of your code, which means, that it can read and manipulate variables just like any other piece of code in your Python file.</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> <span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token string">'print(x)'</span><span class="token punctuation">)</span>
<span class="token number">5</span>
</code></pre><p><code>exec</code> allows you to run truly dynamic code at runtime. You could, for example, download a Python file from the internet at runtime, pass its content to <code>exec</code> and it will run it for you. (But please, never, ever do that.)</p><p>For the most part, you don‚Äôt really need <code>exec</code> while writing your code. It‚Äôs useful for implementing some really dynamic behaviour (such as creating a dynamic class at runtime, like <code>collections.namedtuple</code> does), or to modify the code being read from a Python file (like in <a href="https://github.com/tusharsadhwani/zxpy/blob/3e4eb5e344601cc5a1b4e4f9f72ac3f30111cc93/zx.py#L304">zxpy</a>).</p><p>But, that‚Äôs not the main topic of discussion today. We must learn <em>how</em><code>exec</code> does all of these fancy runtime things.</p><p><code>exec</code> can not only take in a string and run it as code, it can also take in a <strong>code object</strong>.</p><p>Code objects are the ‚Äúbytecode‚Äù version of Python programs, as discussed before. They contain not only the exact instructions generated from your Python code, but it also stores things like the variables and the constants used inside that piece of code.</p><p>Code objects are generated from ASTs (abstract syntax trees), which are themselves generated by a parser that runs on a string of code.</p><p>Now, if you‚Äôre still here after all that nonsense, let‚Äôs try to learn this by example instead. We‚Äôll first generate an AST from our code using the <code>ast</code> module:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> ast
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
... x = [1, 2]
... print(x)
... '''</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> tree <span class="token operator">=</span> ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>code<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>tree<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
  body<span class="token operator">=</span><span class="token punctuation">[</span>
    Assign<span class="token punctuation">(</span>
      targets<span class="token operator">=</span><span class="token punctuation">[</span>
        Name<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      value<span class="token operator">=</span>List<span class="token punctuation">(</span>
        elts<span class="token operator">=</span><span class="token punctuation">[</span>
          Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Expr<span class="token punctuation">(</span>
      value<span class="token operator">=</span>Call<span class="token punctuation">(</span>
        func<span class="token operator">=</span>Name<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'print'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        args<span class="token operator">=</span><span class="token punctuation">[</span>
          Name<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        keywords<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><p>It might seem a bit too much at first, but let me break it down.</p><p>The <code>AST</code> is taken as a python module (the same as a Python file in this case).</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>tree<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
  body<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><p>The module‚Äôs body has two children (two statements):</p><ul><li><p>The first is an <code>Assign</code> statement‚Ä¶</p><pre class=""><code class="language-python">Assign<span class="token punctuation">(</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><p>Which assigns to the target <code>x</code>‚Ä¶</p><pre class=""><code class="language-python">    targets<span class="token operator">=</span><span class="token punctuation">[</span>
      Name<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><p>The value of a <code>list</code> with 2 constants <code>1</code> and <code>2</code>.</p><pre class=""><code class="language-python">    value<span class="token operator">=</span>List<span class="token punctuation">(</span>
      elts<span class="token operator">=</span><span class="token punctuation">[</span>
        Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></li><li><p>The second is an <code>Expr</code> statement, which in this case is a function call‚Ä¶</p><pre class=""><code class="language-python">  Expr<span class="token punctuation">(</span>
    value<span class="token operator">=</span>Call<span class="token punctuation">(</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><p>Of the name <code>print</code>, with the value <code>x</code>.</p><pre class=""><code class="language-python">    func<span class="token operator">=</span>Name<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'print'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      args<span class="token operator">=</span><span class="token punctuation">[</span>
        Name<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></li></ul><p>Doesn‚Äôt seem that bad now, right?</p><p>So now we have an AST object. We can <em>compile</em> it into a code object using <code>compile</code>. Running <code>exec</code> on the code object will do the same thing:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> ast
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
... x = [1, 2]
... print(x)
... '''</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> tree <span class="token operator">=</span> ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>code<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>tree<span class="token punctuation">,</span> <span class="token string">'myfile.py'</span><span class="token punctuation">,</span> <span class="token string">'exec'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">exec</span><span class="token punctuation">(</span>code_obj<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><p>But now, we can look into what a code object looks like. Let‚Äôs examine some of its properties:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj<span class="token punctuation">.</span>co_code
<span class="token string">b'ddgZee¬ÉdS'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj<span class="token punctuation">.</span>co_filename
<span class="token string">'myfile.py'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj<span class="token punctuation">.</span>co_names
<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'print'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj<span class="token punctuation">.</span>co_consts
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre><p>You can see that the variables <code>x</code> and <code>print</code> used in the code, as well as the constants <code>1</code> and <code>2</code>, plus a lot more information about our code file is available inside the code object. This has all the information needed to directly run in the Python virtual machine, in order to produce that output.</p><p>If you want to dive deep into what the bytecode means, the extras section below on the <code>dis</code> module will cover that.</p><details><summary>Extras: the "dis" module</summary><p>The <code>dis</code> module in Python ‚Ä¶</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> dis
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis<span class="token punctuation">.</span>dis<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
... x = [1, 2]
... print(x)
... '''</span><span class="token punctuation">)</span>
  <span class="token number">1</span>           <span class="token number">0</span> LOAD_CONST               <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
              <span class="token number">2</span> LOAD_CONST               <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
              <span class="token number">4</span> BUILD_LIST               <span class="token number">2</span>
              <span class="token number">6</span> STORE_NAME               <span class="token number">0</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span>

  <span class="token number">2</span>           <span class="token number">8</span> LOAD_NAME                <span class="token number">1</span> <span class="token punctuation">(</span><span class="token keyword">print</span><span class="token punctuation">)</span>
             <span class="token number">10</span> LOAD_NAME                <span class="token number">0</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span>
             <span class="token number">12</span> CALL_FUNCTION            <span class="token number">1</span>
             <span class="token number">14</span> POP_TOP
             <span class="token number">16</span> LOAD_CONST               <span class="token number">2</span> <span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span>
             <span class="token number">18</span> RETURN_VALUE
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><p>It shows that:</p><ul><li>Line 1 creates 4 bytecodes, to load 2 constants <code>1</code> and <code>2</code> onto the stack, build a list from the top <code>2</code> values on the stack, and store it into the variable <code>x</code>.</li><li>Line 2 creates 6 bytecodes, it loads <code>print</code> and <code>x</code> onto the stack, and calls the function on the stack with the <code>1</code> argument on top of it. Then it gets rid of the return value from the call by doing <code>POP_TOP</code> because we didn‚Äôt use or store the return value from <code>print(x)</code>. The two lines at the end returns <code>None</code> from the end of the file‚Äôs execution, which does nothing.</li></ul><p>Each of these bytecodes is 2 bytes long when stored as opcodes, that‚Äôs why the numbers to the left of the opcodes are spaces 2 away from each other. It shows that this entire code is 20 bytes long. And indeed, if you do:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
... x = [1, 2]
... print(x)
... '''</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'exec'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj<span class="token punctuation">.</span>co_code
<span class="token string">b'ddgZee¬ÉdS'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>code_obj<span class="token punctuation">.</span>co_code<span class="token punctuation">)</span>
<span class="token number">20</span>
</code></pre><p>You can confirm that the bytecode generated is exactly 20 bytes.</p></details><p><code>eval</code> is pretty similar to exec, except it only accepts expressions (not statements or a set of statements like <code>exec</code>), and unlike <code>exec</code>, it returns a value ‚Äî the result of said expression.</p><p>Here‚Äôs an example:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> result <span class="token operator">=</span> <span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">'1 + 1'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> result
<span class="token number">2</span>
</code></pre><p>You can also go the long, detailed route with <code>eval</code>, you just need to tell <code>ast.parse</code> and <code>compile</code> that you‚Äôre expecting to evaluate this code for its value, instead of running it like a Python file.</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> expr <span class="token operator">=</span> ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'1 + 1'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> code_obj <span class="token operator">=</span> <span class="token builtin">compile</span><span class="token punctuation">(</span>expr<span class="token punctuation">,</span> <span class="token string">'&lt;code&gt;'</span><span class="token punctuation">,</span> <span class="token string">'eval'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>code_obj<span class="token punctuation">)</span>
<span class="token number">2</span>
</code></pre><h3 id="pending"><a aria-hidden="true" tabindex="-1" href="#pending"><span class="icon icon-link"></span></a>Pending:</h3><ul><li>Interesting ones like <code>format</code>, <code>sorted</code>, <code>any</code> and <code>vars</code></li><li>Interacting with <code>locals</code> and <code>globals</code></li><li>Descriptors: <code>property</code>, <code>staticmethod</code>, etc.</li><li>Interesting data types: <code>frozenset</code>, <code>complex</code>, <code>memoryview</code>, etc.</li><li><code>iter</code> and <code>next</code></li><li><code>code</code> type and the <code>compile</code> function</li><li>Overriding python internals by assigning to builtins, like <code>__import__</code></li></ul><h2 id="where-to-learn-more"><a aria-hidden="true" tabindex="-1" href="#where-to-learn-more"><span class="icon icon-link"></span></a>Where to learn more?</h2><p>Through python‚Äôs docs :D</p></main></article></div><script src="https://utteranc.es/client.js" repo="tusharsadhwani/blog-comments" issue-term="title" theme="dark-blue" crossorigin="anonymous" async=""></script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>👨‍💻</text></svg>"><title>What the f-strings?</title><meta name="title" content="What the f-strings?"><meta name="description" content="A comprehensive overview of Python's hottest new feature: f-strings."><meta property="og:type" content="website"><meta property="og:url" content="https://sadh.life"><meta property="og:title" content="What the f-strings?"><meta property="og:description" content="A comprehensive overview of Python's hottest new feature: f-strings."><meta property="og:image" content="https://sadh.life/images/f-strings.jpg"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://sadh.life"><meta property="twitter:title" content="What the f-strings?"><meta property="twitter:description" content="A comprehensive overview of Python's hottest new feature: f-strings."><meta property="twitter:image" content="https://sadh.life/images/f-strings.jpg"><link rel="stylesheet" href="/_astro/common-ZJVY3Q.css" type="text/css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;600&amp;family=Open+Sans:wght@400;600&amp;display=swap"></head><body><header class="astro-mYHAcGzO"><a href="/" class="astro-mYHAcGzO"><svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" width="400" height="400" version="1.1" class="astro-mYHAcGzO"><g class="astro-mYHAcGzO"><rect width="380" height="380" x="10" y="10" stroke="var(--text-color)" stroke-width="18" rx="18" fill-opacity="0" class="astro-mYHAcGzO"></rect><text x="52.5" y="357.427" font-family="sans-serif" font-size="250" font-weight="bold" text-anchor="start" transform="matrix(0.946786642074585,0,0,1.0035842657089233,19.687279514968395,-1.4603642597794533)" xml:space="preserve" style="stroke: var(--text-color); fill: var(--text-color)" class="astro-mYHAcGzO">TS</text></g></svg></a><div class="right astro-mYHAcGzO"><astro-root uid="M"></astro-root>
<script type="module">
import setup from '/_astro_frontend/hydrate/only.js';
setup("M", {}, async () => {
  
  const [{ default: Component }, { default: hydrate }] = await Promise.all([import("/_astro/src/components/ThemeSwitch/Switch.js"), import("/_snowpack/pkg/@astrojs.renderer-preact.client.v0.2.1.js")]);
  return (el, children) => hydrate(el)(Component, {}, children);

});
</script></div></header><div class="layout astro-eZ0V7RoP"><header class="astro-eZ0V7RoP"><p class="publish-date astro-eZ0V7RoP">Wednesday, July 7 2021</p><h1 class="title astro-eZ0V7RoP">What the f-strings?</h1><img src="/images/f-strings.jpg" alt="What the f-strings?" class="astro-eZ0V7RoP"><div class="author astro-vgbcRyj4"><p class="astro-vgbcRyj4"><a href="https://tusharsadhwani.dev" class="astro-vgbcRyj4">@tusharsadhwani</a></p></div></header><article class="content astro-eZ0V7RoP"><main class="astro-eZ0V7RoP"><p>So a couple months ago, I wrote a <a href="https://dev.to/tusharsadhwani/the-comprehensive-guide-to-mypy-561m">comprehensive blog on mypy</a>. Today I’m planning to do the same with f-strings, putting everything I know about them into a single source of knowledge. It’s an awesome Python feature, and I hope you’ll get to learn something new about it ✨</p><h2 id="index"><a aria-hidden="true" tabindex="-1" href="#index"><span class="icon icon-link"></span></a>Index</h2><ul><li><a href="#index">Index</a></li><li><a href="#what-is-an-f-string">What is an f-string?</a></li><li><a href="#simple-examples">Simple examples</a></li><li><a href="#a-brief-history-of-string-formatting">A brief history of string formatting</a></li><li><a href="#why-f-strings">Why f-strings?</a></li><li><a href="#more-examples">More Examples</a><ul><li><a href="#padding--truncating">Padding / truncating</a></li><li><a href="#alignment">Alignment</a></li><li><a href="#rounding-numbers">Rounding numbers</a></li><li><a href="#converting-types">Converting types</a></li><li><a href="#adding-commas-to-large-numbers">Adding commas to large numbers</a></li></ul></li><li><a href="#special-syntax">Special syntax</a><ul><li><a href="#s-r-and-a">!s !r and !a</a></li><li><a href="#datetime-formatting"><code>datetime</code> formatting</a></li><li><a href="#x-syntax"><code>{x=}</code> syntax</a></li></ul></li><li><a href="#nested-formatting">Nested formatting</a></li><li><a href="#custom-formatting-using-__format__">Custom formatting using <code>__format__</code></a></li><li><a href="#limitations">Limitations</a></li><li><a href="#conclusion">Conclusion</a></li></ul><h2 id="what-is-an-f-string"><a aria-hidden="true" tabindex="-1" href="#what-is-an-f-string"><span class="icon icon-link"></span></a>What is an f-string?</h2><p>“f-strings” are a feature added to Python in version 3.6, and it’s essentially a new, more concise way to embed values inside strings.</p><p>They’re called f-strings because of the syntax: you put an <code>f</code> before the string literal, like so:</p><pre class=""><code class="language-python">string <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'this is an f-string'</span></span>
</code></pre><h2 id="simple-examples"><a aria-hidden="true" tabindex="-1" href="#simple-examples"><span class="icon icon-link"></span></a>Simple examples</h2><p>Here’s a few basic examples on how to use f-strings to get you started:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> name<span class="token punctuation">,</span> birth_year <span class="token operator">=</span> <span class="token string">'Tushar'</span><span class="token punctuation">,</span> <span class="token number">2000</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'I am </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">, and I was born in </span><span class="token interpolation"><span class="token punctuation">{</span>birth_year<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
I am Tushar<span class="token punctuation">,</span> <span class="token keyword">and</span> I was born <span class="token keyword">in</span> <span class="token number">2000</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> datetime<span class="token punctuation">;</span> now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'I am </span><span class="token interpolation"><span class="token punctuation">{</span>now<span class="token punctuation">.</span>year <span class="token operator">-</span> birth_year<span class="token punctuation">}</span></span><span class="token string"> years old'</span></span><span class="token punctuation">)</span>
I am <span class="token number">21</span> years old
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> age <span class="token operator">=</span> now<span class="token punctuation">.</span>year <span class="token operator">-</span> birth_year
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'I am </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">"an adult"</span> <span class="token keyword">if</span> age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token keyword">else</span> <span class="token string">"a child"</span><span class="token punctuation">}</span></span><span class="token string">.'</span></span><span class="token punctuation">)</span>
I am an adult<span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><h2 id="a-brief-history-of-string-formatting"><a aria-hidden="true" tabindex="-1" href="#a-brief-history-of-string-formatting"><span class="icon icon-link"></span></a>A brief history of string formatting</h2><p>String formatting in Python dates back a long time. The original formatting using the <code>%</code> sign has existed in Python ever since version 1.x (and even before that in C, which is where this feature’s inspiration comes from). It allowed you to do most string formatting very easily, even though the syntax was a bit unusual: it uses <code>%</code> flags in your string, which get replaced by the values you pass in. Here’s an example:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> city <span class="token operator">=</span> <span class="token string">'London'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'She lives in %s since %d'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>city<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
She lives <span class="token keyword">in</span> London since <span class="token number">2000</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><p>There’s a bunch of these <code>%</code> patterns, and each of them has a meaning:</p><ul><li><code>%s</code> - String</li><li><code>%c</code> - Character (ASCII/Unicode)</li><li><code>%d</code> - Digits (Integer)</li><li><code>%f</code> - Floats</li><li><code>%x</code> - Hexadecimal number, etc.</li></ul><p>Each of these can be modified with more information, like padding and alignment, for example:</p><ul><li><code>%9s</code> means a string of length 9.</li><li><code>%-7d</code> means an integer of length 7, but <strong>left-aligned</strong>.</li></ul><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%15f seconds'</span> <span class="token operator">%</span> <span class="token number">31.415926</span><span class="token punctuation">)</span>
      <span class="token number">31.415926</span> seconds
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%-15f seconds'</span> <span class="token operator">%</span> <span class="token number">31.415926</span><span class="token punctuation">)</span>
<span class="token number">31.415926</span>       seconds
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><p>Eventually, people realised that the <code>%</code> syntax borrowed from C might not be the most readable way to format strings. So in Python 3.0 (alongside 2.6), A new method was added to the <code>str</code> data type: <code>str.format</code>. Not only was it more obvious in what it was doing, it added a bunch of new features, like dynamic data types, center alignment, index-based formatting, and specifying padding characters. Here’s a few examples:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> month <span class="token operator">=</span> <span class="token string">'May'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'I was born in {}.'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token punctuation">)</span>
I was born <span class="token keyword">in</span> May
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> blog_title <span class="token operator">=</span> <span class="token string">'What the f-string?'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{title:-^30}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>title<span class="token operator">=</span>blog_title<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>What the f<span class="token operator">-</span>string?<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{:_&lt;15f} seconds'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">31.415926</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">31.</span>415926______ seconds
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{:&gt;15f} seconds'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">31.415926</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token number">31.415926</span> seconds
</code></pre><blockquote><p>Note that if you don’t specify an alignment character using <code>&lt;</code>, <code>&gt;</code> or <code>^</code>, it will <em>always</em> default to left alignment. This is different from <code>%</code>-formatting, as that defaults to right-alignment for numbers.</p></blockquote><p>Along with <code>str.format</code> method, there’s also a built-in <code>format</code> function which does the same thing.</p><blockquote><p>For a lot more information about <code>%</code>-formatting and <code>str.format</code>, and all of their (many) features, head to <a href="https://pyformat.info">pyformat.info</a>. It is very useful as a reference for the features and syntax.</p></blockquote><h2 id="why-f-strings"><a aria-hidden="true" tabindex="-1" href="#why-f-strings"><span class="icon icon-link"></span></a>Why f-strings?</h2><p>One thing that you should know is that <code>str.format()</code> can already do <em>(almost)</em> everything that f-strings can do. You might be wondering then, “why were f-strings created in the firt place? And why should <em>I</em> care about them?”</p><p>Well, it’s for two reasons:</p><ul><li>it’s <strong>way more intuitive</strong>, and</li><li>it’s <strong>way more readable</strong>.</li></ul><p>Here’s a comparision:</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> name<span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token string">'Mark'</span><span class="token punctuation">,</span> <span class="token number">31</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token comment"># str.format version</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hi, I'</span>m <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token keyword">and</span> I<span class="token string">'m {1} years old.'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
Hi<span class="token punctuation">,</span> I<span class="token string">'m Mark and I'</span>m <span class="token number">31</span> years old<span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token comment"># f-string version</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Hi, I'</span></span>m <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token keyword">and</span> I<span class="token string">'m {age} years old.'</span><span class="token punctuation">)</span>
Hi<span class="token punctuation">,</span> I<span class="token string">'m Mark and I'</span>m <span class="token number">31</span> years old<span class="token punctuation">.</span>
</code></pre><p>These two properties, of being intuitive and readable, are part of the core philisophy of Python (refer <a href="https://www.python.org/dev/peps/pep-0020/">The Zen of Python</a>).</p><h2 id="more-examples"><a aria-hidden="true" tabindex="-1" href="#more-examples"><span class="icon icon-link"></span></a>More Examples</h2><p>Now, a few examples on everything that you can do with f-strings.</p><h3 id="padding--truncating"><a aria-hidden="true" tabindex="-1" href="#padding--truncating"><span class="icon icon-link"></span></a>Padding / truncating</h3><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pi <span class="token operator">=</span> <span class="token number">3.141592</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>pi<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token number">3.141592</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>pi<span class="token punctuation">:</span><span class="token format-spec">10</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>     <span class="token comment"># padding to make length 10</span>
  <span class="token number">3.141592</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>pi<span class="token punctuation">:</span><span class="token format-spec">010</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>    <span class="token comment"># padding with zeroes</span>
<span class="token number">003.141592</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>pi<span class="token punctuation">:</span><span class="token format-spec">.3</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>     <span class="token comment"># 3 digits total, ignoring decimal</span>
<span class="token number">3.14</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> string <span class="token operator">=</span> <span class="token string">"Hello! this is a string"</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>string<span class="token punctuation">:</span><span class="token format-spec">.6</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># 6 characters</span>
<span class="token string">'Hello!'</span>
</code></pre><h3 id="alignment"><a aria-hidden="true" tabindex="-1" href="#alignment"><span class="icon icon-link"></span></a>Alignment</h3><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> heading <span class="token operator">=</span> <span class="token string">'Test'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>heading<span class="token punctuation">:</span><span class="token format-spec">&gt;20</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
                Test
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>heading<span class="token punctuation">:</span><span class="token format-spec">~&gt;20</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># specify alignment for custom padding</span>
<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>Test
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>heading<span class="token punctuation">:</span><span class="token format-spec">_&lt;20</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
Test________________
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>heading<span class="token punctuation">:</span><span class="token format-spec">=^20</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>Test<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><h3 id="rounding-numbers"><a aria-hidden="true" tabindex="-1" href="#rounding-numbers"><span class="icon icon-link"></span></a>Rounding numbers</h3><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> num <span class="token operator">=</span> <span class="token number">2.136</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>num<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token number">2.136</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>num<span class="token punctuation">:</span><span class="token format-spec">.3</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># Rounded up</span>
<span class="token number">2.14</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>num<span class="token punctuation">:</span><span class="token format-spec">.2</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># Rounded down</span>
<span class="token number">2.1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><h3 id="converting-types"><a aria-hidden="true" tabindex="-1" href="#converting-types"><span class="icon icon-link"></span></a>Converting types</h3><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">42</span><span class="token punctuation">:</span><span class="token format-spec">c</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>       <span class="token comment"># int to ascii</span>
<span class="token operator">*</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">604</span><span class="token punctuation">:</span><span class="token format-spec">f</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>      <span class="token comment"># int to float</span>
<span class="token number">604.000000</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">84</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">%'</span></span><span class="token punctuation">)</span>
<span class="token number">84.00</span><span class="token operator">%</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">604</span><span class="token punctuation">:</span><span class="token format-spec">x</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>      <span class="token comment"># int to hex</span>
<span class="token number">25c</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">604</span><span class="token punctuation">:</span><span class="token format-spec">b</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>      <span class="token comment"># int to binary</span>
<span class="token number">1001011100</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">604</span><span class="token punctuation">:</span><span class="token format-spec">0&gt;16b</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># int to binary, with zero-padding</span>
<span class="token number">0000001001011100</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><h3 id="adding-commas-to-large-numbers"><a aria-hidden="true" tabindex="-1" href="#adding-commas-to-large-numbers"><span class="icon icon-link"></span></a>Adding commas to large numbers</h3><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> large_num <span class="token operator">=</span> 12_345_678  <span class="token comment"># int syntax supports underscores :D</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>large_num<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token number">12345678</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>large_num<span class="token punctuation">:</span><span class="token format-spec">,</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token number">12</span><span class="token punctuation">,</span><span class="token number">345</span><span class="token punctuation">,</span><span class="token number">678</span>
</code></pre><h2 id="special-syntax"><a aria-hidden="true" tabindex="-1" href="#special-syntax"><span class="icon icon-link"></span></a>Special syntax</h2><p>There’s a few special set of syntaxes that don’t exist in the original <code>%</code>-formatting:</p><h3 id="s-r-and-a"><a aria-hidden="true" tabindex="-1" href="#s-r-and-a"><span class="icon icon-link"></span></a>!s !r and !a</h3><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># repr value</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">698285</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment"># str value</span>
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">02</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token number">02.772826</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>    <span class="token comment"># str value by default</span>
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">02</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token number">14.357562</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token conversion-option punctuation">!r</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># repr value</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">709937</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token conversion-option punctuation">!s</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># str value</span>
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">02</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token number">20.081837</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> sparkles <span class="token operator">=</span> <span class="token string">'✨'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>sparkles<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
✨
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>sparkles<span class="token conversion-option punctuation">!a</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>        <span class="token comment"># ascii-safe value</span>
<span class="token string">'✨'</span>
</code></pre><h3 id="datetime-formatting"><a aria-hidden="true" tabindex="-1" href="#datetime-formatting"><span class="icon icon-link"></span></a><code>datetime</code> formatting</h3><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec">%A, %B %d %Y</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
Tuesday<span class="token punctuation">,</span> July <span class="token number">06</span> <span class="token number">2021</span>
</code></pre><blockquote><p>For more info on the <code>%</code> codes specifically for datetime objects, check out the documentation for <code>datetime.strftime</code>, or check out <a href="https://strftime.org">strftime.org</a>.</p></blockquote><h3 id="x-syntax"><a aria-hidden="true" tabindex="-1" href="#x-syntax"><span class="icon icon-link"></span></a><code>{x=}</code> syntax</h3><p>This is a new syntax that was added to Python 3.8, and it helps you quickly print out a variable’s value, usually for debugging purposes. Essentially, <code>f'{abc=}'</code> is the same as <code>f'abc={abc!r}'</code>.</p><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>x<span class="token operator">=</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
x<span class="token operator">=</span><span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">,</span> y <span class="token operator">=</span> y<span class="token punctuation">,</span> x<span class="token operator">+</span>y
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>x<span class="token operator">=</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>y<span class="token operator">=</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
x<span class="token operator">=</span><span class="token number">5</span> y<span class="token operator">=</span><span class="token number">8</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> string <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">.</span>center<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>string <span class="token operator">=</span> <span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
string <span class="token operator">=</span> <span class="token string">'***test***'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token number">10</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">20</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><h2 id="nested-formatting"><a aria-hidden="true" tabindex="-1" href="#nested-formatting"><span class="icon icon-link"></span></a>Nested formatting</h2><p>Since we can sometimes have rather complicated format specifications, like <code>~^30s</code> or <code>0&gt;12,.2f</code>, it makes sense to be able to extract those out into variables as well. And that’s exactly what <strong>nested formatting</strong> lets us do.</p><p>Some things that you can do with</p><ul><li>Variable length padding</li></ul><pre class=""><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> string <span class="token operator">=</span> <span class="token string">'Python'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> size <span class="token operator">=</span> <span class="token number">20</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>string<span class="token punctuation">:</span><span class="token punctuation">{</span>size<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>Python<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><ul><li>putting in the format spec as a variable, or as multiple variables:</li></ul><pre class=""><code class="language-python"><span class="token keyword">from</span> math <span class="token keyword">import</span> pi

digits <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'Enter number of digits of pi: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
length <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'Enter string length: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
alignment <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'Enter alignment (&lt;, &gt; or ^): '</span><span class="token punctuation">)</span>
padding_char <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'Enter padding character: '</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>pi<span class="token punctuation">:</span><span class="token punctuation">{</span>padding_char<span class="token punctuation">}</span><span class="token punctuation">{</span>alignment<span class="token punctuation">}</span><span class="token punctuation">{</span>length<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token punctuation">{</span>digits<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</code></pre><p>Output:</p><pre class=""><code class="language-html">Enter number of digits of pi: 8
Enter string length: 30
Enter alignment (<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>,</span> <span class="token punctuation">&gt;</span></span> or ^): ^
Enter padding character: _
__________3.1415927___________
</code></pre><h2 id="custom-formatting-using-__format__"><a aria-hidden="true" tabindex="-1" href="#custom-formatting-using-__format__"><span class="icon icon-link"></span></a>Custom formatting using <code>__format__</code></h2><p>You can define custom format handling in your own objects by overriding the <code>__format__</code> method on the formatter object. This allows you to define (mostly) arbitrary formatting semantics.</p><p>Here’s an example, with more sensible names for datetime formatting:</p><pre class=""><code class="language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

<span class="token keyword">class</span> <span class="token class-name">BetterDatetime</span><span class="token punctuation">(</span>datetime<span class="token punctuation">)</span><span class="token punctuation">:</span>
    substitutions <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'%day'</span><span class="token punctuation">:</span> <span class="token string">'%A'</span><span class="token punctuation">,</span>
        <span class="token string">'%date'</span><span class="token punctuation">:</span> <span class="token string">'%d'</span><span class="token punctuation">,</span>
        <span class="token string">'%monthname'</span><span class="token punctuation">:</span> <span class="token string">'%B'</span><span class="token punctuation">,</span>
        <span class="token string">'%month'</span><span class="token punctuation">:</span> <span class="token string">'%m'</span><span class="token punctuation">,</span>
        <span class="token string">'%year'</span><span class="token punctuation">:</span> <span class="token string">'%Y'</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">__format__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> format_spec<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> token<span class="token punctuation">,</span> replacement <span class="token keyword">in</span> self<span class="token punctuation">.</span>substitutions<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            format_spec <span class="token operator">=</span> format_spec<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>token<span class="token punctuation">,</span> replacement<span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__format__<span class="token punctuation">(</span>format_spec<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Today is </span><span class="token interpolation"><span class="token punctuation">{</span>BetterDatetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec">%day, %date %monthname %year</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>

<span class="token comment"># Output: Today is Monday, 8 July 2021</span>
</code></pre><h2 id="limitations"><a aria-hidden="true" tabindex="-1" href="#limitations"><span class="icon icon-link"></span></a>Limitations</h2><p>As amazing as f-strings are, they’re not the be-all and end-all of string formatting in Python. <em>(but they come very close!)</em></p><p>Some nitpicks from my side about f-strings are:</p><ul><li><p>You can’t separate the string template from the data being embedded. In str.format, you can store the strings themselves as templates in a separate file, like <code>text = '{user} has left'</code>. Then, you can import <code>text</code> and use <code>text.format(user=...)</code>. You can’t do this with f-strings.</p></li><li><p>f-strings only work in Python 3.6+, and <code>{x=}</code> syntax only works in Python 3.8+</p></li><li><p>There’s also no real replacement for the <code>str.format_map</code> method using f-strings.</p></li></ul><h2 id="conclusion"><a aria-hidden="true" tabindex="-1" href="#conclusion"><span class="icon icon-link"></span></a>Conclusion</h2><p>All in all, f-strings are awesome, and everyone should use them :P</p><p>Anywho, if you have any questions or suggestions, drop them below. I’d love to hear from you ✨</p></main></article></div><script src="https://utteranc.es/client.js" repo="tusharsadhwani/blog-comments" issue-term="title" theme="dark-blue" crossorigin="anonymous" async=""></script><noscript><img src="https://analytics.sadh.life/ingress/f6c6e99f-df6a-43f3-9c16-f434cee0278e/pixel.gif"></noscript><script defer="" src="https://analytics.sadh.life/ingress/f6c6e99f-df6a-43f3-9c16-f434cee0278e/script.js"></script></body></html>